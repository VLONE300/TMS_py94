{% extends 'index.html' %}
{% load static %}
{% block read_news %}
    <div class="col-md-12 col-sm-12">
        <h1>{{ news.title }}</h1>
        <img class="card-img-top" src="{{ news.image.url }}" alt="Card image cap">
        <p class="mt-4 mb-4">{{ news.content|safe }}</p>
    </div>

    <h3 class="editContent" style="..."><span class="sub-title">{{ news.comment_set.count }} </span>Оставить Комментарий
    </h3>
    <form action="{% url 'add-comment' news.id %}" method="post" class="mt-4" id="formComment">
        {% csrf_token %}
        <input type="hidden" name="parent" id="contactparent">
        <div class="form-group editContent"
             style="...">
            <label for="contactcomment" class="editContent"
                   style="...">
                Ваш комментарий *
            </label>
            <textarea class="form-control border" rows="5" name="text"
                      id="contactcomment" required=""></textarea>
        </div>
        <button type="submit"
                class="mt-3 btn btn-success btn-block py-3">
            Отправить
        </button>
    </form>

    {% for comment in news.get_comment %}
    <div class="media py-5">
        <img src={% static 'news/images/avatar.jpg' %} class="avatar_comment">
        <div class="media-body mt-4">
            <h5 class="mt-0 editContent">
                {{ comment.name }}
            </h5>
            <p class="mt-2 editContent">
                {{ comment.text }}
            </p>
            <a href="#formComment" onclick="addComment('{{ comment.name }}','{{ comment.id }}')">Ответить</a>

            {% for com in comment.comment_set.all %}
                <div class="media mt-5 editContent">
                    <a class="pr-3" href="#">
                        <img src={% static 'news/images/avatar.jpg' %} class="avatar_comment" alt="image">
                    </a>
                    <div class="media-body">
                        <h5 class="mt-0 editContent">{{ com.name }}</h5>
                        <p class="mt-2 editContent">{{ com.text }}</p>
                    </div>
                </div>
                {% endfor %}
                </div>
                </div>
            {% endfor %}
    </div>
    </div>
    <script>
        function addComment(name, id) {
            document.getElementById('contactparent').value = id;
            document.getElementById('contactcomment').innerText = `${name}, `
        }
    </script>
{% endblock %}